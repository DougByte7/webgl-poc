(this["webpackJsonpwebgl-poc"]=this["webpackJsonpwebgl-poc"]||[]).push([[0],{24:function(e,r,t){},25:function(e,r,t){},27:function(e,r,t){"use strict";t.r(r),r.default="attribute vec3 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\nattribute vec3 aVertexNormal;\r\n\r\nuniform mat4 uProjectionMatrix;\r\nuniform mat4 uModelViewMatrix;\r\nuniform mat4 uNormalMatrix;\r\n\r\nvarying vec3 normalInterp;\r\nvarying vec3 vertPos;\r\nvarying highp vec2 vTextureCoord;\r\n\r\nvoid main(){\r\n    gl_Position=uProjectionMatrix*uModelViewMatrix*vec4(aVertexPosition,1.);\r\n    vec4 vertPos4=uModelViewMatrix*vec4(aVertexPosition,1.);\r\n    vertPos=vec3(vertPos4)/vertPos4.w;\r\n    normalInterp=vec3(uNormalMatrix*vec4(aVertexNormal,0.));\r\n    vTextureCoord=aTextureCoord;\r\n}\r\n"},28:function(e,r,t){"use strict";t.r(r),r.default="precision mediump float;\r\n\r\nvarying vec3 normalInterp;\r\nvarying vec3 vertPos;\r\nvarying highp vec2 vTextureCoord;\r\n\r\nuniform sampler2D uSampler;\r\n\r\nconst vec3 lightPos=vec3(1.,1.,1.);\r\nconst vec3 lightColor=vec3(1.,1.,1.);\r\nconst float lightPower=40.;\r\nconst vec3 ambientColor=vec3(.1,0.,0.);\r\nconst vec3 diffuseColor=vec3(1.0, 1.0, 1.0);\r\nconst vec3 specColor=vec3(1.,1.,1.);\r\nconst float shininess=16.;\r\nconst float screenGamma=2.2;// Assume the monitor is calibrated to the sRGB color space\r\n\r\nvoid main(){\r\n    \r\n    vec3 normal=normalize(normalInterp);\r\n    vec3 lightDir=lightPos-vertPos;\r\n    float distance=length(lightDir);\r\n    distance=distance*distance;\r\n    lightDir=normalize(lightDir);\r\n    \r\n    float lambertian=max(dot(lightDir,normal),0.);\r\n    float specular=0.;\r\n    \r\n    if(lambertian>0.){\r\n        \r\n        vec3 viewDir=normalize(-vertPos);\r\n        \r\n        vec3 halfDir=normalize(lightDir+viewDir);\r\n        float specAngle=max(dot(halfDir,normal),0.);\r\n        specular=pow(specAngle,shininess);\r\n    }\r\n    vec3 colorLinear=ambientColor+\r\n    diffuseColor*lambertian*lightColor*lightPower/distance+\r\n    specColor*specular*lightColor*lightPower/distance;\r\n    \r\n    vec3 colorGammaCorrected=pow(colorLinear,vec3(1./screenGamma));\r\n    \r\n    highp vec4 texelColor=texture2D(uSampler,vTextureCoord);\r\n    \r\n    gl_FragColor=vec4(texelColor.rgb*colorGammaCorrected,texelColor.a);\r\n}\r\n"},29:function(e,r,t){},30:function(e,r,t){},31:function(e,r,t){},32:function(e,r,t){},33:function(e,r,t){"use strict";t.r(r);var n=t(1),a=t.n(n),o=t(6),i=t.n(o),c=(t(24),t(2)),s=(t(25),t(3));function l(e){var r=e.createBuffer();if(!r)throw new Error("Failed to create buffer");return r}var u=function(e,r,t){var n=function(e,r){var t=e.createShader(r);if(!t)throw new Error("Failed to create shader.");return t}(e,r);if(e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(n);throw e.deleteShader(n),new Error("An error occurred compiling the shaders: ".concat(a))}return n},m=function(e,r,t){var n=u(e,e.VERTEX_SHADER,r),a=u(e,e.FRAGMENT_SHADER,t),o=function(e){var r=e.createProgram();if(!r)throw new Error("Failed to create program.");return r}(e);if(e.attachShader(o,n),e.attachShader(o,a),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw new Error("Unable to initialize the shader program: ".concat(e.getProgramInfoLog(o)));return o},b=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],f=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],d=[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],v=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],h=t.p+"static/media/uv-reference.dba5e4c6.png",g=t(0),x=t(27).default,j=t(28).default,p=function(e){var r=e.isPlaying,t=e.scale,a=e.rotationX,o=e.rotationY,i=e.rotationZ,u=Object(n.useRef)(null),p=Object(n.useState)(),E=Object(c.a)(p,2),R=E[0],O=E[1],T=Object(n.useRef)(0),A=Object(n.useRef)(),w=Object(n.useRef)(0),P=Object(n.useRef)(),_=Object(n.useRef)(),C=Object(n.useRef)(),F=Object(n.useRef)(),y=Object(n.useRef)(),L=Object(n.useRef)(),S=Object(n.useRef)(),D=function(){var e=Object(n.useState)([window.innerWidth,window.innerHeight]),r=Object(c.a)(e,2),t=r[0],a=r[1];return Object(n.useLayoutEffect)((function(){var e=function(){a([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),t}(),N=Object(c.a)(D,2),U=N[0],I=N[1];return Object(n.useEffect)((function(){if(u.current){var e=function(e){var r=e.getContext("webgl2");if(!r)throw new Error("Unable to initialize WebGL. Your browser or machine may not support it.");return r}(u.current);O(e)}}),[u]),Object(n.useEffect)((function(){if(R){var e=[.26,.26,.29,1];R.clearColor.apply(R,e),R.clear(R.COLOR_BUFFER_BIT),P.current||(P.current=m(R,x,j));var n={program:P.current,attribLocations:{vertexPosition:R.getAttribLocation(P.current,"aVertexPosition"),vertexColor:R.getAttribLocation(P.current,"aVertexColor"),textureCoord:R.getAttribLocation(P.current,"aTextureCoord"),vertexNormal:R.getAttribLocation(P.current,"aVertexNormal")},uniformLocations:{projectionMatrix:R.getUniformLocation(P.current,"uProjectionMatrix"),modelViewMatrix:R.getUniformLocation(P.current,"uModelViewMatrix"),normalMatrix:R.getUniformLocation(P.current,"uNormalMatrix"),uSampler:R.getUniformLocation(P.current,"uSampler")}};_.current||(_.current=function(e,r){var t=e.createTexture();if(!t)throw new Error("Failed to create texture.");e.bindTexture(e.TEXTURE_2D,t);var n=e.RGBA,a=e.RGBA,o=e.UNSIGNED_BYTE,i=new Uint8Array([255,20,147,255]);e.texImage2D(e.TEXTURE_2D,0,n,1,1,0,a,o,i);var c=function(e){return 0===(e&e-1)},s=new Image;return s.onload=function(){e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,n,a,o,s),c(s.width)&&c(s.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))},s.src=r,t}(R,h));return requestAnimationFrame((function c(u){var m=(u*=.001)-w.current;w.current=u,function(c,u,m){c.viewport(0,0,c.canvas.width,c.canvas.height),c.clearColor.apply(c,e),c.clearDepth(1),c.enable(c.DEPTH_TEST),c.depthFunc(c.LEQUAL),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);var h=45*Math.PI/180,g=c.canvas.clientWidth/c.canvas.clientHeight,x=s.a.create();s.a.perspective(x,h,g,.1,100),S.current=s.a.create(),s.a.translate(S.current,S.current,[0,0,-6]),s.a.scale(S.current,S.current,[t,t,t]),s.a.rotate(S.current,S.current,r?.5*T.current:a,[1,0,0]),s.a.rotate(S.current,S.current,r?.2*T.current:o,[0,1,0]),s.a.rotate(S.current,S.current,r?T.current:i,[0,0,1]);var j=s.a.create();s.a.invert(j,S.current),s.a.transpose(j,j),C.current||(C.current=l(c),c.bindBuffer(c.ARRAY_BUFFER,C.current),c.bufferData(c.ARRAY_BUFFER,new Float32Array(b),c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,C.current),c.vertexAttribPointer(u.attribLocations.vertexPosition,3,c.FLOAT,!1,0,0),c.enableVertexAttribArray(u.attribLocations.vertexPosition)),F.current||(F.current=l(c),c.bindBuffer(c.ARRAY_BUFFER,F.current),c.bufferData(c.ARRAY_BUFFER,new Float32Array(d),c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,F.current),c.vertexAttribPointer(u.attribLocations.textureCoord,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(u.attribLocations.textureCoord)),y.current||(y.current=l(c),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,y.current),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(f),c.STATIC_DRAW)),L.current||(L.current=l(c),c.bindBuffer(c.ARRAY_BUFFER,L.current),c.bufferData(c.ARRAY_BUFFER,new Float32Array(v),c.STATIC_DRAW),c.vertexAttribPointer(u.attribLocations.vertexNormal,3,c.FLOAT,!1,0,0),c.enableVertexAttribArray(u.attribLocations.vertexNormal)),c.useProgram(u.program),c.uniformMatrix4fv(u.uniformLocations.projectionMatrix,!1,x),c.uniformMatrix4fv(u.uniformLocations.modelViewMatrix,!1,S.current),c.uniformMatrix4fv(u.uniformLocations.normalMatrix,!1,j),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,_.current),c.uniform1i(n.uniformLocations.uSampler,0),c.drawElements(c.TRIANGLES,36,c.UNSIGNED_SHORT,0),T.current-=m*r}(R,n,m),A.current=requestAnimationFrame(c)})),function(){cancelAnimationFrame(A.current)}}}),[R,r,t,a,o,i]),Object(g.jsx)("canvas",{ref:u,id:"glCanvas",width:U,height:I})},E=(t(29),function(e){var r=e.title,t=e.children,n=e.className,a=e.type,o=e.onClick;return Object(g.jsx)("button",{className:"button ".concat(a," ").concat(n),title:r,onClick:o,children:t})});E.defaultProps={type:"default"};var R=E,O=t(4),T=t(11),A=(t(30),function(e){var r=e.label,t=e.className,n=Object(T.a)(e,["label","className"]);return Object(g.jsxs)("label",{className:"range-input-label ".concat(t),htmlFor:n.id,children:[r,Object(g.jsx)("input",Object(O.a)({className:"range-input",type:"range"},n)),n.value]})});A.defaultProps={className:"",disabled:!1};var w=A,P=(t(31),function(e){var r=e.isPlaying,t=e.setIsPlaying,n=e.scale,a=e.setScale,o=e.rotationX,i=e.setRotationX,c=e.rotationY,s=e.setRotationY,l=e.rotationZ,u=e.setRotationZ,m=e.error,b=e.setError,f=r?"\u23f8\ufe0f Pause":"\u25b6\ufe0f Play",d=function(e){return function(r){e(parseFloat(r.currentTarget.value))}};if(m)throw b(!1),new Error('HTTPCode: 200; payload: { status: "error", message: "Failed with success!" }');var v=2*Math.PI;return Object(g.jsxs)("menu",{type:"toolbar",className:"menu",children:[Object(g.jsx)("li",{className:"menu-item",children:Object(g.jsx)(w,{label:"Scale (xyz)",name:"scale-range",id:"scale-range",value:n,min:.1,max:2,step:.1,onChange:d(a)})}),r&&Object(g.jsx)("span",{className:"nope",children:"\ud83d\udeab Can not change rotation while the animation is playing !"}),Object(g.jsx)("li",{className:"menu-item",children:Object(g.jsx)(w,{label:"Rotation (x)",name:"rotation-x-range",id:"rotation-x-range",value:o,min:0,max:v,step:.1,disabled:r,onChange:d(i)})}),Object(g.jsx)("li",{className:"menu-item",children:Object(g.jsx)(w,{label:"Rotation (y)",name:"rotation-y-range",id:"rotation-y-range",value:c,min:0,max:v,step:.1,disabled:r,onChange:d(s)})}),Object(g.jsx)("li",{className:"menu-item",children:Object(g.jsx)(w,{label:"Rotation (z)",name:"rotation-z-range",id:"rotation-z-range",value:l,min:0,max:v,step:.1,disabled:r,onChange:d(u)})}),Object(g.jsx)("li",{className:"menu-item play-pause",children:Object(g.jsx)(R,{className:"btn-play-pause",title:f,onClick:function(){t(!r)},children:f})}),Object(g.jsx)("li",{className:"menu-item",children:Object(g.jsx)(R,{className:"btn-error",title:"Throw error",type:"error",onClick:function(){b(!0)},children:"\ud83d\udca5 Throw error"})})]})});var _=function(){var e=Object(n.useState)(!0),r=Object(c.a)(e,2),t=r[0],a=r[1],o=Object(n.useState)(1),i=Object(c.a)(o,2),s=i[0],l=i[1],u=Object(n.useState)(0),m=Object(c.a)(u,2),b=m[0],f=m[1],d=Object(n.useState)(0),v=Object(c.a)(d,2),h=v[0],x=v[1],j=Object(n.useState)(0),E=Object(c.a)(j,2),R=E[0],O=E[1],T=Object(n.useState)(!1),A=Object(c.a)(T,2),w=A[0],_=A[1];return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(p,{isPlaying:t,scale:s,rotationX:b,rotationY:h,rotationZ:R}),Object(g.jsx)(P,{isPlaying:t,setIsPlaying:a,scale:s,setScale:l,rotationX:b,setRotationX:f,rotationY:h,setRotationY:x,rotationZ:R,setRotationZ:O,error:w,setError:_})]})},C=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,34)).then((function(r){var t=r.getCLS,n=r.getFID,a=r.getFCP,o=r.getLCP,i=r.getTTFB;t(e),n(e),a(e),o(e),i(e)}))},F=t(7),y=t(8),L=t(10),S=t(9),D=(t(32),function(e){var r,t;return Object(g.jsxs)("section",{className:"error-boundary",children:[Object(g.jsx)("h1",{className:"error-boundary__title",children:"Something wrong is not right!"}),Object(g.jsx)("h2",{className:"error-boundary__message",children:null===(r=e.error)||void 0===r?void 0:r.message}),Object(g.jsx)("p",{className:"error-boundary__stack",children:null===(t=e.errorInfo)||void 0===t?void 0:t.componentStack}),Object(g.jsx)(R,{className:"error-boundary__btn-go-back",title:"Go back",onClick:function(){window.location.href=window.location.href},children:"I want to be monke! \ud83d\udc35"})]})}),N=function(e){Object(L.a)(t,e);var r=Object(S.a)(t);function t(e){var n;return Object(F.a)(this,t),(n=r.call(this,e)).state={hasError:!1,error:null,errorInfo:null},n}return Object(y.a)(t,[{key:"componentDidCatch",value:function(e,r){this.setState(Object(O.a)(Object(O.a)({},this.state),{},{error:e,errorInfo:r}))}},{key:"render",value:function(){return this.state.hasError?Object(g.jsx)(D,{error:this.state.error,errorInfo:this.state.errorInfo}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.a.Component);i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(N,{children:Object(g.jsx)(_,{})})}),document.getElementById("root")),C(console.log)}},[[33,1,2]]]);
//# sourceMappingURL=main.c19d1d44.chunk.js.map